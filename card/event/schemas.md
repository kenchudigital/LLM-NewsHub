# Event Card Schema

This document describes the schema for event card data extracted from news articles.

## Data Source
Generated by `card/event/process.py` using LLM-based Named Entity Recognition (NER) to extract structured event information from news articles.

## Schema Overview

| Column | Type | Description | Source | Calculation Method | Example |
|--------|------|-------------|--------|-------------------|---------|
| event_type | string | Type/category of the event | LLM Prompt | Generated by LLM using event card prompt | "sports", "social", "political" |
| event_description | string | 1-2 sentence description of the event | LLM Prompt | Generated by LLM using event card prompt | "Second day of the first men's cricket Test match..." |
| event_date | string | Date of the event (YYYY-MM-DD) | LLM Prompt | Generated by LLM using event card prompt | "2025-06-21" |
| event_time | string | Time of the event (HH:MM:SS) or "Empty" | LLM Prompt | Generated by LLM using event card prompt | "11:00:00" |
| event_location | string | JSON array of location names | LLM Prompt | Generated by LLM using event card prompt | "['Headingley', 'United Kingdom']" |
| event_organizer | string | JSON array of organizing entities | LLM Prompt | Generated by LLM using event card prompt | "['Cricket authorities']" |
| event_people_involved | string | JSON array of people/organizations involved | LLM Prompt | Generated by LLM using event card prompt | "['England cricket team', 'India cricket team']" |
| event_connections | string | How this event links to others | LLM Prompt | Generated by LLM using event card prompt | "Continuation of the first Test match..." |
| statement_or_comment | string | Key quote or reaction | LLM Prompt | Generated by LLM using event card prompt | "Empty" |
| statement_source | string | Source of the statement | LLM Prompt | Generated by LLM using event card prompt | "Empty" |
| statement_source_url | string | URL to statement source | LLM Prompt | Generated by LLM using event card prompt | "Empty" |
| image_caption | string | Caption for associated image | LLM Prompt | Generated by LLM using event card prompt | "Empty" |
| image_url | string | URL to associated image | LLM Prompt | Generated by LLM using event card prompt | "Empty" |
| order | integer | Ordering number for events | LLM Prompt | Generated by LLM using event card prompt | 1 |
| summary | string | 1-2 sentence summary of the news | LLM Prompt | Generated by LLM using event card prompt | "Live updates for the second day..." |
| news_category | string | JSON array of news categories | LLM Prompt | Generated by LLM using event card prompt | "['sports']" |
| content_sentiment | float | Sentiment score (-1 to 1) | LLM Prompt | Generated by LLM using event card prompt | 0.0 |
| fake_news_score | float | Fake news probability (0-1) | LLM Prompt | Generated by LLM using event card prompt | 0.1 |
| ai_generated_score | float | AI-generated content probability (0-1) | LLM Prompt | Generated by LLM using event card prompt | 0.2 |
| list_of_keywords | string | JSON array of important keywords | LLM Prompt | Generated by LLM using event card prompt | "['cricket', 'England', 'India']" |
| fake_news_probability | float | ML model fake news probability | Python Script | ML model prediction using `predict_fake_news()` | 0.8319422844595938 |
| real_news_probability | float | ML model real news probability | Python Script | ML model prediction using `predict_fake_news()` | 0.16805771554040647 |
| confidence_score | float | Model confidence score (0-1) | Python Script | Calculated using `calculate_confidence_score()` with linear interpolation | 0.954 |
| title | string | News article title | Fundus Data | Original article data from fundus scraper | "England v India: first men's cricket Test..." |
| content | string | Full news article content | Fundus Data | Original article data from fundus scraper | "Updates from Headingley, play from 11am BST..." |
| topic | string | JSON array of topics | Fundus Data | Original article data from fundus scraper | "['England v India 2025', 'Cricket']" |
| publish_time | datetime | Article publication timestamp | Fundus Data | Original article data from fundus scraper | "2025-06-21 09:56:58+00:00" |
| link | string | URL to the news article | Fundus Data | Original article data from fundus scraper | "https://www.theguardian.com/sport/live/..." |
| publisher | string | News publisher name | Fundus Data | Original article data from fundus scraper | "TheGuardian" |
| publisher_country | string | Publisher's country code | Fundus Data | Original article data from fundus scraper | "uk" |
| language | string | Article language code | Fundus Data | Original article data from fundus scraper | "en" |
| media_links | string | JSON array of media links | Fundus Data | Original article data from fundus scraper | "[]" |
| extract_time | datetime | Data extraction timestamp | Fundus Data | Original article data from fundus scraper | "2025-06-21 17:57:48.344579+00:00" |
| word_count | integer | Number of words in article | Fundus Data | Original article data from fundus scraper | 15 |
| url_category | string | URL category classification | Fundus Data | Original article data from fundus scraper | "sport" |
| url_sub_category | string | URL sub-category | Fundus Data | Original article data from fundus scraper | "live" |
| url_domain | string | Domain name | Fundus Data | Original article data from fundus scraper | "www.theguardian.com" |
| publish_date | string | Publication date (YYYY-MM-DD) | Fundus Data | Original article data from fundus scraper | "2025-06-21" |
| domain | string | Domain name | Python Script | Extracted using `extract_domain()` function | "theguardian.com" |
| Source | string | Source name | publishers_bias.csv | Media Bias Fact Check database | "The Guardian" |
| MBFC URL | string | Media Bias Fact Check URL | publishers_bias.csv | Media Bias Fact Check database | "https://mediabiasfactcheck.com/the-guardian/" |
| Bias | string | Media bias classification | publishers_bias.csv | Media Bias Fact Check database | "Left-Center" |
| Country | string | Publisher country | publishers_bias.csv | Media Bias Fact Check database | "United Kingdom" |
| Factual Reporting | string | Factual reporting rating | publishers_bias.csv | Media Bias Fact Check database | "Mixed" |
| Media Type | string | Type of media outlet | publishers_bias.csv | Media Bias Fact Check database | "Newspaper" |
| Source URL | string | Source website URL | publishers_bias.csv | Media Bias Fact Check database | "theguardian.com" |
| Credibility | string | Credibility rating | publishers_bias.csv | Media Bias Fact Check database | "Medium" |
| Source ID# | integer | Source identifier | publishers_bias.csv | Media Bias Fact Check database | 102945 |
| bias_score | float | Numerical bias score (-1 to 1) | Python Script | Calculated using bias_mapping dictionary | -0.4 |
| factual_score | float | Factual reporting score (-1 to 1) | Python Script | Calculated using factual_mapping dictionary | 0.0 |
| credibility_score | float | Credibility score (-1 to 1) | Python Script | Calculated using credibility_mapping dictionary | 0.5 |
| composite_score | float | Combined trust score (0-1) | Python Script | Formula: (factual_score+1)/2*0.6 + (1-abs(bias_score))*0.3 + (credibility_score+1)/2*0.1 | 0.27 |
| ISO | string | Country ISO code | country_2025.csv | World Justice Project Rule of Law Index | "GBR" |
| Score 2025 | float | Trust score for 2025 | country_2025.csv | World Justice Project Rule of Law Index | 78.89 |
| Rank | integer | Global trust ranking | country_2025.csv | World Justice Project Rule of Law Index | 20 |
| Political Context | float | Political context score | country_2025.csv | World Justice Project Rule of Law Index | 81.54 |
| Rank_Pol | integer | Political ranking | country_2025.csv | World Justice Project Rule of Law Index | 16 |
| Economic Context | float | Economic context score | country_2025.csv | World Justice Project Rule of Law Index | 68.43 |
| Rank_Eco | integer | Economic ranking | country_2025.csv | World Justice Project Rule of Law Index | 16 |
| Legal Context | float | Legal context score | country_2025.csv | World Justice Project Rule of Law Index | 75.6 |
| Rank_Leg | integer | Legal ranking | country_2025.csv | World Justice Project Rule of Law Index | 40 |
| Social Context | float | Social context score | country_2025.csv | World Justice Project Rule of Law Index | 78.46 |
| Rank_Soc | integer | Social ranking | country_2025.csv | World Justice Project Rule of Law Index | 31 |
| Safety | float | Safety score | country_2025.csv | World Justice Project Rule of Law Index | 90.42 |
| Rank_Saf | integer | Safety ranking | country_2025.csv | World Justice Project Rule of Law Index | 39 |
| Zone | string | Geographic zone | country_2025.csv | World Justice Project Rule of Law Index | "UE Balkans" |
| Country_FR | string | Country name in French | country_2025.csv | World Justice Project Rule of Law Index | "Royaume-Uni" |
| Country_EN | string | Country name in English | country_2025.csv | World Justice Project Rule of Law Index | "United Kingdom" |
| Country_ES | string | Country name in Spanish | country_2025.csv | World Justice Project Rule of Law Index | "Reino Unido" |
| Country_PT | string | Country name in Portuguese | country_2025.csv | World Justice Project Rule of Law Index | "Reino Unido" |
| Country_AR | string | Country name in Arabic | country_2025.csv | World Justice Project Rule of Law Index | "??????? ???????" |
| Country_FA | string | Country name in Persian | country_2025.csv | World Justice Project Rule of Law Index | "????????" |
| Year (N) | integer | Year | country_2025.csv | World Justice Project Rule of Law Index | 2025 |
| Rank N-1 | integer | Previous year ranking | country_2025.csv | World Justice Project Rule of Law Index | 23 |
| Rank evolution | integer | Ranking change | country_2025.csv | World Justice Project Rule of Law Index | 3 |
| Score N-1 | float | Previous year score | country_2025.csv | World Justice Project Rule of Law Index | 77.51 |
| Score evolution | float | Score change | country_2025.csv | World Justice Project Rule of Law Index | 1.38 |
| Country_code | string | Country code | country_2025.csv | World Justice Project Rule of Law Index | "uk" |
| textblob_polarity | float | TextBlob sentiment polarity | Python Script | Calculated using TextBlob library | 0.19318181818181818 |
| textblob_subjectivity | float | TextBlob subjectivity | Python Script | Calculated using TextBlob library | 0.41666666666666663 |
| vader_neg | float | VADER negative sentiment | Python Script | Calculated using NLTK VADER analyzer | 0.138 |
| vader_neu | float | VADER neutral sentiment | Python Script | Calculated using NLTK VADER analyzer | 0.769 |
| vader_pos | float | VADER positive sentiment | Python Script | Calculated using NLTK VADER analyzer | 0.092 |
| vader_compound | float | VADER compound sentiment | Python Script | Calculated using NLTK VADER analyzer | -0.296 |
| event_id | string | Unique event identifier | Python Script | Generated using `generate_short_uuid()` function | "rPE9XQI" |

## Data Sources

### 1. publishers_bias.csv
- **Source**: Media Bias Fact Check database
- **Contains**: Publisher bias ratings, factual reporting scores, credibility assessments
- **Key Fields**: Source, Bias, Factual Reporting, Credibility, Media Type, Country
- **Processing**: Raw categorical values mapped to numerical scores using predefined dictionaries

[LINK](scrapers/trust_score/readme.md)

### 2. country_2025.csv  
- **Source**: World Justice Project Rule of Law Index 2025
- **Contains**: Country-level trust scores, rankings across multiple contexts
- **Key Fields**: Trust scores, rankings for Political, Economic, Legal, Social contexts and Safety
- **Processing**: Merged based on country code mapping

[LINK](scrapers/trust_score/readme.md)

### 3. Fundus Data
- **Source**: Web scraping of news articles
- **Contains**: Raw article content, metadata, publication information
- **Key Fields**: title, content, publisher, publish_time, link, media_links
- **Processing**: Original scraped data used as base for analysis

## Calculation Methods

### Python Script Calculations
- **bias_score**: Mapped from categorical bias ratings using predefined dictionary
- **factual_score**: Mapped from factual reporting ratings using predefined dictionary  
- **credibility_score**: Mapped from credibility ratings using predefined dictionary
- **composite_score**: Weighted formula combining factual (60%), bias (30%), and credibility (10%) scores
- **confidence_score**: Linear interpolation based on ML model probability using predefined confidence points
- **sentiment scores**: Multi-method sentiment analysis using TextBlob and VADER libraries
- **domain extraction**: Pattern matching against publisher URL database
- **event_id**: Base64-encoded UUID truncated to 7 characters

### LLM Prompt Calculations  
- **Event extraction fields**: Generated using structured prompts sent to Qwen-Plus model
- **Content analysis**: LLM analyzes news content to extract structured event information
- **Response format**: JSON object with predefined schema for consistent data structure

### ML Model Calculations
- **fake_news_probability/real_news_probability**: Predictions from trained fake news detection model
- **Model confidence**: Derived from maximum probability using confidence score mapping

## Data Processing Notes

- **Entity Extraction**: Uses LLM-based NER to extract structured event information
- **Sentiment Analysis**: Multi-method approach using TextBlob and VADER
- **Trust Scoring**: Integrates Media Bias Fact Check data for publisher credibility
- **Fake News Detection**: ML model probabilities for content authenticity
- **Geographic Data**: Includes country rankings and trust scores from multiple sources
- **Rate Limiting**: 1-second delay between LLM calls to prevent API throttling
- **Intermediate Saves**: Progress saved every 10 articles to prevent data loss

